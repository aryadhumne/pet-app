{% extends "base.html" %}
{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pets Marketplace</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== BASE UI (UNCHANGED) ===== */
body{
    margin:0;
    font-family:'Segoe UI', sans-serif;
    background: linear-gradient(180deg,#fff7ed,#ffffff);
}
.header{text-align:center;padding:20px;}
.header h1{
    font-size:28px;
    background:linear-gradient(90deg,#f97316,#fb923c);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}
.header p{color:#9a3412;font-size:14px}

.search-box{
    max-width:520px;
    margin:0 auto 15px;
    display:flex;
}
.search-box input{
    flex:1;
    padding:12px;
    border-radius:25px;
    border:1px solid #fed7aa;
    background:#ffedd5;
}

.tabs{
    display:flex;
    justify-content:center;
    gap:10px;
    margin-bottom:15px;
}
.tab-btn{
    padding:10px 18px;
    border:none;
    border-radius:30px;
    background:#ffedd5;
    font-weight:600;
    cursor:pointer;
}
.tab-btn.active{
    background:linear-gradient(135deg,#f97316,#fb923c);
    color:white;
}

.pets{
    max-width:1100px;
    margin:auto;
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:20px;
    padding:20px;
}

.pet-card{
    background:white;
    border-radius:20px;
    overflow:hidden;
    box-shadow:0 10px 25px rgba(0,0,0,0.12);
}
.pet-card img{
    width:100%;
    height:230px;
    object-fit:cover;
}
.pet-body{padding:15px}
.pet-name{font-size:18px;font-weight:700}
.pet-info{font-size:14px;color:#555}
.price{color:#ea580c;font-weight:700;margin:6px 0}

.btn{
    width:100%;
    padding:10px;
    border:none;
    border-radius:12px;
    cursor:pointer;
    font-weight:600;
}
.buy-btn{
    background:linear-gradient(135deg,#f97316,#fb923c);
    color:white;
}
.adopt-btn{
    background:linear-gradient(135deg,#22c55e,#4ade80);
    color:white;
}

/* ===== SELL FORM ===== */
.sell-box{
    max-width:540px;
    margin:25px auto;
    background:linear-gradient(180deg,#fff7ed,#ffffff);
    padding:25px;
    border-radius:24px;
}

.big-preview{
    height:300px;
    border:3px dashed #f97316;
    border-radius:20px;
    display:flex;
    align-items:center;
    justify-content:center;
    color:#f97316;
    margin-bottom:12px;
}
.big-preview img{
    width:100%;
    height:100%;
    object-fit:cover;
    border-radius:18px;
}

/* ===== INPUT BEAUTIFICATION (UI ONLY) ===== */
.sell-box input,
.sell-box select,
.sell-box textarea{
    width:100%;
    padding:14px 16px;
    margin-bottom:14px;
    border-radius:18px;
    border:2px solid transparent;
    font-size:14px;
    font-weight:500;
    color:#7c2d12;

    background:
        linear-gradient(#ffedd5,#ffedd5) padding-box,
        linear-gradient(135deg,#f97316,#fb923c) border-box;

    outline:none;
    transition:all .25s ease;
}

.sell-box input:focus,
.sell-box select:focus,
.sell-box textarea:focus{
    box-shadow:0 0 0 4px rgba(251,146,60,.25);
    transform:scale(1.02);
}

.sell-box textarea{resize:none;min-height:80px;}

.sell-box select{
    appearance:none;
    -webkit-appearance:none;
    background-image:
        linear-gradient(#ffedd5,#ffedd5),
        linear-gradient(135deg,#f97316,#fb923c),
        url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ea580c'><path d='M7 10l5 5 5-5z'/></svg>");
    background-repeat:no-repeat;
    background-position:padding-box,border-box,right 14px center;
    background-size:auto,auto,18px;
    padding-right:42px;
}

.sell-box button{
    background:linear-gradient(135deg,#f97316,#fb923c);
    border-radius:20px;
    font-size:15px;
    box-shadow:0 12px 24px rgba(249,115,22,.35);
}

/* ===== MODALS ===== */
.modal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.6);
    z-index:999;
}
.modal-box{
    background:white;
    max-width:420px;
    margin:8% auto;
    padding:20px;
    border-radius:18px;
}
.modal-box h3{text-align:center;color:#ea580c}
.modal-box input,
.modal-box textarea,
.modal-box select{
    width:100%;
    padding:10px;
    margin-bottom:10px;
    border-radius:10px;
    border:1px solid #fed7aa;
}
</style>
</head>

<body>

<div class="header">
    <h1>üêæ Pets Marketplace</h1>
    <p>Adopt ‚Ä¢ Buy ‚Ä¢ Sell Pets</p>
</div>

<div class="search-box">
    <input id="searchInput" placeholder="Search by pet name or species..." oninput="renderPets()">
</div>

<div class="tabs">
    <button class="tab-btn active" onclick="openTab('adopt')">Adopt</button>
    <button class="tab-btn" onclick="openTab('buy')">Buy</button>
    <button class="tab-btn" onclick="openTab('sell')">Sell</button>
</div>

<div id="adopt" class="section"><div class="pets" id="adoptList"></div></div>
<div id="buy" class="section" style="display:none;"><div class="pets" id="buyList"></div></div>

<!-- SELL FORM (UNCHANGED STRUCTURE) -->
<div id="sell" class="section" style="display:none;">
<div class="sell-box">
<h3>üß° Sell Your Pet</h3>

<div class="big-preview" id="mainPreview">Upload Pet Image</div>
<input type="file" accept="image/*" onchange="previewMain(event)">

<input id="petName" placeholder="Pet Name *">
<select id="petType">
<option>Dog</option><option>Cat</option><option>Bird</option>
<option>Fish</option><option>Rabbit</option><option>Turtle</option><option>Hamster</option>
</select>

<select id="petGender">
<option>‚ôÇ Male</option>
<option>‚ôÄ Female</option>
</select>

<input id="petBreed" placeholder="Breed">
<input id="petAge" placeholder="Age">
<textarea id="petDisease" placeholder="Health disease"></textarea>

<input id="petPrice" type="number" placeholder="Price (0 for adoption)">
<input id="ownerPhone" placeholder="Contact Number">
<textarea id="ownerAddress" placeholder="Address"></textarea>

<button onclick="addPet()">üöÄ Add Pet</button>
</div>
</div>

<!-- BUY MODAL -->
<div id="buyModal" class="modal">
<div class="modal-box">
<h3>üõí Buy Pet</h3>
<input placeholder="Your Name">
<input placeholder="Mobile Number">
<textarea placeholder="Delivery Address"></textarea>
<select>
<option>UPI</option>
<option>Debit / Credit Card</option>
<option>Cash on Delivery</option>
</select>
<button class="btn buy-btn" onclick="closeBuy()">Confirm Purchase</button>
</div>
</div>

<!-- ADOPT MODAL -->
<div id="adoptModal" class="modal">
<div class="modal-box">
<h3>üß° Adopt Pet</h3>
<input placeholder="Your Name">
<input placeholder="Mobile Number">
<textarea placeholder="Why do you want to adopt?"></textarea>
<button class="btn adopt-btn" onclick="closeAdopt()">Submit Request</button>
</div>
</div>

<script>
let pets=[];
let mainImage="";

function openTab(tab){
    document.querySelectorAll('.section').forEach(s=>s.style.display='none');
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    document.getElementById(tab).style.display='block';
    event.target.classList.add('active');
}

function previewMain(e){
    const r=new FileReader();
    r.onload=()=>{
        mainImage=r.result;
        mainPreview.innerHTML=`<img src="${mainImage}">`;
    };
    r.readAsDataURL(e.target.files[0]);
}

function addPet(){
    pets.push({
        name:petName.value,
        type:petType.value,
        gender:petGender.value,
        breed:petBreed.value,
        age:petAge.value,
        disease:petDisease.value,
        price:Number(petPrice.value)||0,
        image:mainImage || "https://place-puppy.com/400x300"
    });

    alert("Pet added successfully!");
    renderPets();

    petName.value="";
    petBreed.value="";
    petAge.value="";
    petDisease.value="";
    petPrice.value="";
    ownerPhone.value="";
    ownerAddress.value="";
    petType.selectedIndex=0;
    petGender.selectedIndex=0;
    mainImage="";
    mainPreview.innerHTML="Upload Pet Image";
}

function renderPets(){
    adoptList.innerHTML="";
    buyList.innerHTML="";
    const q=searchInput.value.toLowerCase();

    pets.filter(p =>
        p.name.toLowerCase().includes(q) ||
        p.type.toLowerCase().includes(q)
    ).forEach(p=>{
        const card=`
        <div class="pet-card">
            <img src="${p.image}">
            <div class="pet-body">
                <div class="pet-name">${p.name} (${p.gender})</div>
                <div class="pet-info">${p.type} ‚Ä¢ ${p.breed} ‚Ä¢ ${p.age}</div>
                ${p.price===0
                ? `<button class="btn adopt-btn" onclick="openAdopt()">Adopt</button>`
                : `<div class="price">‚Çπ${p.price}</div>
                   <button class="btn buy-btn" onclick="openBuy()">Buy</button>`}
            </div>
        </div>`;
        p.price===0 ? adoptList.innerHTML+=card : buyList.innerHTML+=card;
    });
}

function openBuy(){buyModal.style.display="block";}
function closeBuy(){buyModal.style.display="none";}
function openAdopt(){adoptModal.style.display="block";}
function closeAdopt(){adoptModal.style.display="none";}
</script>

</body>
</html>
{% endblock %}